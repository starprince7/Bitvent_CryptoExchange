{"version":3,"sources":["jsx/layout/sidebar2.jsx","jsx/pages/withdraw-requests.jsx"],"names":["connect","state","withdraw_request","dashboard_state","dispatch","fetchWithdrawRequest","style","fontSize","color","marginLeft","display","icon_style","useEffect","className","to","title","length","num_of_refresh","JSON","parse","localStorage","getItem","setItem","stringify","setTimeout","window","location","reload","approve_btn_ref","useRef","remove_btn_ref","deleteRequest","id","button","event","target","textContent","disabled","axios","delete","then","result","data","alert","catch","error","console","log","map","request","ref","onClick","amount","email","walletAddress","preventDefault","options","post","approve_withdrawal_request","_id","crypto_type","wallet_address","class","role"],"mappings":"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","file":"static/js/8.4c6dc15e.chunk.js","sourcesContent":["import React, { useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux'\r\nimport { fetchWithdrawRequest } from '../../redux/app_state/actions'\r\n\r\n\r\n\r\nfunction Sidebar2({ fetchWithdrawRequest, withdraw_request }) {\r\n\r\n    const style = {\r\n        fontSize: '11px',\r\n        color: 'white',\r\n        marginLeft: \"-10px\",\r\n        display: 'inline-flex'\r\n    }\r\n\r\n    const icon_style = {\r\n        fontSize: \"14px\",\r\n        marginLeft: \"-10px\",\r\n    }\r\n\r\n    useEffect(() => {\r\n        fetchWithdrawRequest()\r\n    }, [fetchWithdrawRequest])\r\n\r\n    return (\r\n        <>\r\n        {/* ADD BORDER RADIUS IN BOOTSTARP TO SIDE BAR */}\r\n            <div className=\"sidebar\">\r\n                <div className=\"menu\">\r\n                    <ul>\r\n                        <li>\r\n                            <Link to={'./admin_dashboard'} data-toggle=\"tooltip\" data-placement=\"right\" title=\"Home\">\r\n                                <span><i style={icon_style} className=\"fas fa-users\"></i></span><br />\r\n                                <span style={style}>Accounts</span>\r\n                            </Link>\r\n                        </li>\r\n                        {/* <li>\r\n                            <Link to={'#'} data-toggle=\"tooltip\" data-placement=\"right\" title=\"Exchange\">\r\n                                <span><i style={icon_style} className=\"fas fa-funnel-dollar\"></i></span>\r\n                                <span style={style}>Fund Account</span>\r\n                            </Link>\r\n                        </li> */}\r\n                        <li>\r\n                            <Link to={'./admin_withdrawal_request'} data-toggle=\"tooltip\" data-placement=\"right\" title=\"Account\">\r\n                                <span><i style={icon_style} className=\"fas fa-money-check-alt\"></i></span>\r\n                                { withdraw_request?.length !== 0 &&\r\n                                    <span style={{ fontSize: '9px' }} className=\"badge badge-pill badge-danger text-white\">{ withdraw_request?.length }</span> }\r\n                                <span style={style}>Withdraw Request</span>\r\n                            </Link>\r\n                        </li>\r\n                        <li>\r\n                            <Link to={'#'} data-toggle=\"tooltip\" data-placement=\"right\" title=\"Setting\">\r\n                                <span><i className=\"la la-tools\"></i></span>\r\n                                <span style={style}>Settings</span>\r\n                            </Link>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        withdraw_request: state.dashboard_state.withdraw_request\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n    return {\r\n        fetchWithdrawRequest: () => dispatch(fetchWithdrawRequest())\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Sidebar2);","import React, { useRef, useEffect } from 'react'\r\nimport Header2 from \"../layout/header2\";\r\nimport Sidebar2 from \"../layout/sidebar2\";\r\nimport PageTitle from \"../element/page-title\";\r\nimport Footer2 from \"../layout/footer2\";\r\nimport { connect } from 'react-redux'\r\nimport { fetchWithdrawRequest } from '../../redux/app_state/actions'\r\nimport axios from 'axios'\r\n\r\nfunction WithdrawRequests({ withdraw_request, fetchWithdrawRequest }) {\r\n\r\n    // Purpose of this func\r\n    // After Code-Spliting the bundled files\r\n    // The App does not load the single page completely.\r\n    // SOLUTION:\r\n    // 1. Reload page after the first complete DOM load-up\r\n    useEffect(() => {\r\n      // Get The Refresh Count First!\r\n      const num_of_refresh = JSON.parse(localStorage.getItem('num_of_refresh'))\r\n\r\n       // On Component Mount Persist The Refresh Count onCondition Second\r\n      localStorage.setItem('num_of_refresh', JSON.stringify((num_of_refresh >=2 ? -1 : num_of_refresh) + 1))\r\n\r\n      setTimeout(() => {\r\n          if (num_of_refresh <= 1) {\r\n              window.location.reload()\r\n          }\r\n      }, 500)\r\n  }, [])\r\n\r\n  const approve_btn_ref = useRef(null)\r\n  const remove_btn_ref = useRef(null)\r\n\r\n\r\n  const deleteRequest = (id) => {\r\n    // delete Func block.\r\n    const button = () => !window.event.target ? null : window.event.target\r\n    // Dispatch Loader\r\n    if (button) {\r\n      button.textContent = \"Deleting...\"\r\n      button.disabled = true\r\n    }\r\n\r\n    axios\r\n      .delete(`/admin/request/${id}`)\r\n      .then((result) => {\r\n      //  Stop Loader\r\n        if (button) {\r\n          button.textContent = \"Delete\"\r\n          button.disabled = false\r\n        }\r\n        result.data && alert(\"Withdrawal request deleted!\");\r\n        fetchWithdrawRequest()\r\n      })\r\n      .catch((error) => {\r\n        console.log(\"ERR! Deleting Request ==>\", error);\r\n        // Stop Loader\r\n        if (button) {\r\n          button.textContent = \"Delete Error\"\r\n          button.disabled = false\r\n        }\r\n      });\r\n  };\r\n\r\n  const approve_withdrawal_request = (id, amount, email, walletAddress) => {\r\n    window.event.preventDefault();\r\n    const button = window.event.target\r\n    // Dispatch Loader\r\n    button.textContent = \"Loading...\"\r\n    button.disabled = true\r\n\r\n    let options = {\r\n      amount,\r\n      email,\r\n      walletAddress\r\n    };\r\n\r\n    axios.post(\"/admin/request/approval\", options)\r\n      .then(result => {\r\n\r\n        const button = window.event.target\r\n        // Dispatch Loader\r\n        button.textContent = \"Approved\"\r\n        button.disabled = false\r\n      \r\n      if (result.data ) {\r\n        alert(\"Request approved.\")\r\n        setTimeout(() => {       \r\n          deleteRequest(id);  /* The ID is of the Request API and not the Customers APi */\r\n        }, 500)\r\n\r\n      }\r\n        \r\n    })\r\n      .catch(error => {\r\n        const button = window.event.target\r\n        // Dispatch Loader\r\n        button.textContent = \"Error\"\r\n        button.disabled = false\r\n        \r\n        console.log(\"ERR! Aproving Withdraw Request ==>\", error);\r\n    })\r\n\r\n\r\n\r\n  }\r\n\r\n    return (\r\n        <>\r\n           <Header2 />\r\n            <Sidebar2 />\r\n            <PageTitle /> \r\n            <div className=\"content-body\">\r\n        <div className=\"container-fluid\">\r\n          <div className=\"row\">\r\n            <div className=\"col-xl-12\">\r\n              <div className=\"card\">\r\n                <div className=\"card-header border-0\">\r\n                  <h4 className=\"card-title\">Withdrawal Requests</h4>\r\n                </div>\r\n                <div className=\"card-body pt-0\">\r\n                  <div className=\"transaction-table\">\r\n                    <div className=\"table-responsive\">\r\n                      <table className=\"table mb-0 table-responsive-sm\">\r\n                        <tbody>\r\n                          {\r\n                            withdraw_request?.length !== 0 && withdraw_request ? withdraw_request.map( (request) => (\r\n                              <tr key={request._id}>\r\n                              <td><button ref={approve_btn_ref} onClick={() => approve_withdrawal_request(request._id, request.amount, request.email, request.walletAddress)} className=\"btn btn-success\">Approve</button></td>\r\n                                <td>\r\n                                  <span className=\"badge badge-info\">{ request.email }</span>\r\n                                </td>\r\n\r\n                                <td className=\"text-primary\">${ request.amount }</td>\r\n                                <td className=\"text-primary\">{ request.crypto_type }</td>\r\n                                <td className=\"text-primary\">{ request.wallet_address }</td>\r\n                                <td><button ref={remove_btn_ref} data-id={request._id} onClick={() => deleteRequest(request._id)} className=\"delete_btn btn btn-danger\">Delete</button></td>\r\n                            </tr>\r\n                            )) :\r\n                            (<div className=\"container\">\r\n                              <div class=\"alert alert-info\" role=\"alert\">\r\n                                You have no widthraw request!\r\n                              </div>\r\n                            </div>)\r\n                          }\r\n                        </tbody>\r\n                      </table>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n            <Footer2 />\r\n        </>\r\n    )\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n    return {\r\n        withdraw_request: state.dashboard_state.withdraw_request\r\n    }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    fetchWithdrawRequest: () => dispatch(fetchWithdrawRequest())\r\n  }\r\n}\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(WithdrawRequests)\r\n"],"sourceRoot":""}